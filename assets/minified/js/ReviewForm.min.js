"use strict";(globalThis.webpackChunkwca_woocommerce=globalThis.webpackChunkwca_woocommerce||[]).push([[948],{292:(e,a,o)=>{o.r(a),o.d(a,{default:()=>u});var c=o(307),r=o(283);const{i18n:{__},hooks:{applyFilters:t},element:{useEffect:m,useState:s}}=wp,l=t("wecodeart.wecodeart.woocommerce.reviews.rating.suggestions",{1:[__("Not recommended","wca-woocommerce"),__("Very weak","wca-woocommerce"),__("Not happy","wca-woocommerce")],2:[__("Weak","wca-woocommerce"),__("I don't like it","wca-woocommerce"),__("Disappointing","wca-woocommerce")],3:[__("Decent","wca-woocommerce"),__("Acceptable","wca-woocommerce"),__("Ok","wca-woocommerce")],4:[__("Happy","wca-woocommerce"),__("I like it","wca-woocommerce"),__("Is worth it","wca-woocommerce"),__("Good","wca-woocommerce")],5:[__("Excelent","wca-woocommerce"),__("Very satisfied","wca-woocommerce"),__("Recommended","wca-woocommerce"),__("Cool","wca-woocommerce")]}),n=e=>{let{rating:a=5}=e;const[o,r]=s(l[a]);m((()=>r(l[a])),[a]);const t=e=>document.forms["wca-woo-addreview"].elements.title.value=e.currentTarget.textContent,n=e=>{let{key:a,label:o}=e;const r={type:"button",className:"wp-element-button has-accent-background-color has-black-color rounded-pill me-2",key:a,onClick:t};return(0,c.createElement)("button",r,o)};return(0,c.createElement)("div",{className:"woocommerce-Reviews__suggestions d-flex flex-wrap align-items-center"},o.map(((e,a)=>(0,c.createElement)(n,{key:a,label:e}))))},i=e=>{let{userData:a={},note:o,options:r}=e;const{Template:t}=wecodeart,{product:{title:m}}=r,{reviewer:s="visitor"}=a;return o&&(0,c.createElement)("div",{className:"woocommerce-Reviews__respond-note",dangerouslySetInnerHTML:{__html:t.renderToString(o,{userName:s,productTitle:m})}})};var w=o(620);const{i18n:{__:d},hooks:{doAction:p},element:{useState:v}}=wp,u=e=>{let{rating:a,setRating:o,queryArgs:t,setQueryArgs:m,userData:s=!1,options:l}=e;const{product:{ID:u},terms:b,note:g,requestUrl:E}=l,[f,_]=v(!1),[N,h]=v(!1),{handleSubmit:y,register:k,errors:R}=(0,r.cI)();return(0,c.createElement)("div",{className:"woocommerce-Reviews__respond"},(0,c.createElement)("div",{className:"grid"},g&&(0,c.createElement)("div",{className:"span-12 span-lg-4 start-lg-9"},(0,c.createElement)(i,{userData:s,note:g,options:l})),(0,c.createElement)("div",{className:"span-12 span-lg-7 order-lg-first"},(0,c.createElement)("form",{className:"woocommerce-Reviews__respond-form",name:"wca-woo-addreview",onSubmit:y((async(e,a)=>{if(f)return;const c=new FormData;c.append("action","review"),c.append("product_id",u),Object.keys(e).map((a=>c.append(a,e[a]))),s&&Object.keys(s).map((e=>c.append(e,s[e]))),_(!0);try{const e=await fetch(E,{method:"POST",body:c}),{message:r}=await e.json();h(r)}finally{_(!1),setTimeout((()=>o(!1)),3e3),a.target.querySelector("#review-success").scrollIntoView({behavior:"smooth",block:"end"}),a.target.reset(),m({...t})}}))},p("wecodeart.woocommerce.reviews.newReview.top",k,R,l),(0,c.createElement)("div",{className:"woocommerce-Reviews__respond-field"},(0,c.createElement)("div",{className:"mb-3"},(0,c.createElement)(w.Z,{rating:a,setRating:o,onClick:(e,a)=>{const c=document.forms["wca-woo-addreview"];c.elements.rating.value=e;const r=Array.prototype.slice.call(c.querySelectorAll(".woocommerce-Reviews__star"));for(let e=0;e<r.length;e++)r[e].classList.remove("active");a.currentTarget.className="active",o(e)},register:k({validate:e=>0!==e})}),(0,c.createElement)("input",{type:"hidden",name:"rating",value:a,ref:k({required:d("This cannot be empty!","wca-woocommerce"),minLength:0,maxLength:5})}))),!s&&(0,c.createElement)("div",{className:"woocommerce-Reviews__respond-field grid"},(0,c.createElement)("div",{className:"mb-3 span-12 span-md-6"},(0,c.createElement)("label",{className:"mb-0 fw-700",for:"reviewer"},d("Name","wca-woocommerce"),":"),(0,c.createElement)("input",{className:"form-control",type:"text",name:"reviewer",id:"reviewer",ref:k({required:d("What is your name?","wca-woocommerce"),validate:e=>"admin"!==e||d("Nice Try","wca-woocommerce")}),placeholder:d("Name","wca-woocommerce")}),R.reviewer&&(0,c.createElement)("em",{class:"invalid-feedback d-block"},R.reviewer.message)),(0,c.createElement)("div",{className:"mb-3 span-12 span-md-6"},(0,c.createElement)("label",{className:"mb-0 fw-700",for:"reviewer_email"},d("Email","wca-woocommerce"),":"),(0,c.createElement)("input",{className:"form-control",type:"email",name:"reviewer_email",id:"reviewer_email",ref:k({required:d("What is your email address?","wca-woocommerce"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,message:d("Invalid email address.","wca-woocommerce")}}),placeholder:d("Email","wca-woocommerce")}),R.reviewer_email&&(0,c.createElement)("em",{class:"invalid-feedback d-block"},R.reviewer_email.message))),(0,c.createElement)("div",{className:"woocommerce-Reviews__respond-field"},(0,c.createElement)("div",{className:"mb-3"},(0,c.createElement)("label",{className:"mb-0 fw-700",for:"review_title"},d("Review title (optional)","wca-woocommerce"),":"),(0,c.createElement)("input",{className:"form-control",type:"text",name:"title",id:"review_title",ref:k,placeholder:d("Use a suggestion or write your own title","wca-woocommerce")})),(0,c.createElement)("div",{className:"mb-3"},(0,c.createElement)(n,{rating:a}))),(0,c.createElement)("div",{className:"woocommerce-Reviews__respond-field"},(0,c.createElement)("div",{className:"mb-3"},(0,c.createElement)("label",{className:"mb-0 fw-700",for:"review"},d("Review","wca-woocommerce"),":"),(0,c.createElement)("textarea",{className:"form-control",id:"review",name:"review",rows:"7",required:"",ref:k({required:d("This cannot be empty!","wca-woocommerce"),minLength:20}),placeholder:d("Describe your experience with the product","wca-woocommerce")}),R.review&&(0,c.createElement)("em",{class:"invalid-feedback d-block"},"minLength"===R.review.type?d("Please be more descriptive.","wca-woocommerce"):R.review.message))),p("wecodeart.woocommerce.reviews.newReview.bottom",k,R,l),b&&(0,c.createElement)("div",{className:"woocommerce-Reviews__respond-field woocommerce-Reviews__respond-field--terms"},(0,c.createElement)("div",{className:"mb-3"},(0,c.createElement)("p",{className:"has-small-font-size has-cyan-bluish-gray-color",dangerouslySetInnerHTML:{__html:b}}))),(0,c.createElement)("div",{className:"woocommerce-Reviews__respond-field"},(0,c.createElement)("button",{type:"submit",className:"wp-element-button has-primary-background-color py-1",disabled:!0===f},d("Add Review","wca-woocommerce")),(0,c.createElement)("span",{className:"mx-1"}),(0,c.createElement)("a",{href:"javascript:void(0);",onClick:()=>o(!1),className:"wp-element-link"},d("Cancel","wca-woocommerce")),N&&(0,c.createElement)("div",{id:"review-success",className:"rounded has-accent-background-color p-3 mt-3"},N))))))}}}]);