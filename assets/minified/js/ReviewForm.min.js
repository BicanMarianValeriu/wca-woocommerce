"use strict";(globalThis.webpackChunkwca_woocommerce=globalThis.webpackChunkwca_woocommerce||[]).push([[948],{292:(e,a,o)=>{o.r(a),o.d(a,{default:()=>E});var c=o(462),r=o(307),t=o(536);const{i18n:{__},hooks:{applyFilters:m},element:{useEffect:s,useState:l}}=wp,i=m("wecodeart.woocommerce.reviews.rating.suggestions",{1:[__("Not recommended","wca-woocommerce"),__("Very weak","wca-woocommerce"),__("Not happy","wca-woocommerce")],2:[__("Weak","wca-woocommerce"),__("I don't like it","wca-woocommerce"),__("Disappointing","wca-woocommerce")],3:[__("Decent","wca-woocommerce"),__("Acceptable","wca-woocommerce"),__("Ok","wca-woocommerce")],4:[__("Happy","wca-woocommerce"),__("I like it","wca-woocommerce"),__("Is worth it","wca-woocommerce"),__("Good","wca-woocommerce")],5:[__("Excelent","wca-woocommerce"),__("Very satisfied","wca-woocommerce"),__("Recommended","wca-woocommerce"),__("Cool","wca-woocommerce")]}),n=e=>{let{rating:a=5}=e;const[o,c]=l(i[a]);s((()=>c(i[a])),[a]);const t=e=>document.forms["wca-woo-addreview"].elements.title.value=e.currentTarget.textContent,m=e=>{let{key:a,label:o}=e;const c={type:"button",className:"wp-element-button has-accent-background-color has-black-color",key:a,onClick:t};return(0,r.createElement)("button",c,o)};return(0,r.createElement)("div",{className:"woocommerce-Reviews__suggestions",style:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:".5rem"}},o.map(((e,a)=>(0,r.createElement)(m,{key:a,label:e}))))};var w=o(332);const{Template:d={renderToString:w.Dq}}=window.wecodeart||{},p=e=>{let{userData:a={},note:o,options:c}=e;const{product:{title:t}}=c,{reviewer:m="visitor"}=a;return o&&(0,r.createElement)("div",{className:"woocommerce-Reviews__respond-note",dangerouslySetInnerHTML:{__html:d.renderToString(o,{userName:m,productTitle:t})}})};var v=o(620);const{i18n:{__:u},hooks:{doAction:b},element:{useState:g}}=wp,E=e=>{let{rating:a,setRating:o,queryArgs:m,setQueryArgs:s,userData:l=!1,options:i,breakpoint:w}=e;const{product:{ID:d},terms:E,note:y,requestUrl:_}=i,[h,N]=g(!1),[f,k]=g(!1),{handleSubmit:R,register:T,reset:S,formState:{errors:x}}=(0,t.cI)({mode:"onSubmit"});return(0,r.createElement)("div",{className:"woocommerce-Reviews__respond"},(0,r.createElement)("div",{className:"grid"},y&&(0,r.createElement)("div",{className:"span-12 span-lg-4 start-lg-9"},(0,r.createElement)(p,{userData:l,note:y,options:i})),(0,r.createElement)("div",{className:"span-12 span-lg-7",style:{gridRow:"mobile"===w?"initial":1}},(0,r.createElement)("form",{className:"woocommerce-Reviews__respond-form",name:"wca-woo-addreview",onSubmit:R((async(e,a)=>{if(h)return;const c=new FormData;c.append("action","review"),c.append("product_id",d),Object.keys(e).map((a=>c.append(a,e[a]))),l&&Object.keys(l).map((e=>c.append(e,l[e]))),N(!0);try{const e=await fetch(_,{method:"POST",body:c}),{message:a}=await e.json();k(a)}catch(a){console.warn(a),k(a)}finally{N(!1),setTimeout((()=>o(!1)),3e3),S(),s({...m})}}))},b("wecodeart.woocommerce.reviews.newReview.top",T,x,i),(0,r.createElement)("div",{className:"woocommerce-Reviews__respond-field"},(0,r.createElement)("div",{className:"mb-spacer"},(0,r.createElement)(v.Z,{rating:a,onClick:o},(0,r.createElement)("input",(0,c.Z)({type:"hidden",name:"rating",value:a},T("rating",{validate:e=>0!==e,minLength:1,maxLength:5})))))),!l&&(0,r.createElement)("div",{className:"woocommerce-Reviews__respond-field grid"},(0,r.createElement)("div",{className:"mb-spacer span-12 span-md-6"},(0,r.createElement)("label",{for:"reviewer"},u("Name","wca-woocommerce"),":"),(0,r.createElement)("input",(0,c.Z)({className:"form-control",type:"text",id:"reviewer",placeholder:u("Name","wca-woocommerce")},T("reviewer",{required:u("What is your name?","wca-woocommerce"),validate:e=>"admin"!==e||u("Nice Try","wca-woocommerce")}))),x.reviewer&&(0,r.createElement)("em",{class:"invalid-feedback",style:{display:"block"}},x.reviewer.message)),(0,r.createElement)("div",{className:"mb-spacer span-12 span-md-6"},(0,r.createElement)("label",{for:"reviewer_email"},u("Email","wca-woocommerce"),":"),(0,r.createElement)("input",(0,c.Z)({className:"form-control",type:"email",id:"reviewer_email",placeholder:u("Email","wca-woocommerce")},T("reviewer_email",{required:u("What is your email address?","wca-woocommerce"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,message:u("Invalid email address.","wca-woocommerce")}}))),x.reviewer_email&&(0,r.createElement)("em",{class:"invalid-feedback",style:{display:"block"}},x.reviewer_email.message))),(0,r.createElement)("div",{className:"woocommerce-Reviews__respond-field"},(0,r.createElement)("div",{className:"mb-spacer"},(0,r.createElement)("label",{for:"review_title"},u("Review title (optional)","wca-woocommerce"),":"),(0,r.createElement)("input",(0,c.Z)({className:"form-control",type:"text",id:"review_title",placeholder:u("Use a suggestion or write your own title","wca-woocommerce")},T("title")))),(0,r.createElement)("div",{className:"mb-spacer"},(0,r.createElement)(n,{rating:a}))),(0,r.createElement)("div",{className:"woocommerce-Reviews__respond-field"},(0,r.createElement)("div",{className:"mb-spacer"},(0,r.createElement)("label",{for:"review"},u("Review","wca-woocommerce"),":"),(0,r.createElement)("textarea",(0,c.Z)({className:"form-control",id:"review",rows:"7",required:"",placeholder:u("Describe your experience with the product","wca-woocommerce")},T("review",{required:u("This cannot be empty!","wca-woocommerce"),minLength:20}))),x.review&&(0,r.createElement)("em",{class:"invalid-feedback",style:{display:"block"}},"minLength"===x.review.type?u("Please be more descriptive.","wca-woocommerce"):x.review.message))),b("wecodeart.woocommerce.reviews.newReview.bottom",T,x,i),E&&(0,r.createElement)("div",{className:"woocommerce-Reviews__respond-field woocommerce-Reviews__respond-field--terms"},(0,r.createElement)("div",{className:"mb-spacer"},(0,r.createElement)("p",{className:"has-small-font-size has-cyan-bluish-gray-color",dangerouslySetInnerHTML:{__html:E}}))),(0,r.createElement)("div",{className:"woocommerce-Reviews__respond-field"},(0,r.createElement)("button",{type:"submit",className:"wp-element-button has-primary-background-color",disabled:!0===h},u("Add Review","wca-woocommerce")),(0,r.createElement)("span",null," Â  "),(0,r.createElement)("a",{href:"javascript:void(0);",onClick:()=>o(!1),className:"wp-element-link"},u("Cancel","wca-woocommerce")),f&&(0,r.createElement)("div",{className:"has-accent-background-color",style:{padding:"1rem",marginTop:"1rem",borderRadius:".25rem"}},f))))))}}}]);